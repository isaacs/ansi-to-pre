<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://node-tap.org/static/Fira_Code_v6/fira_code.css" />
    <style type="text/css">
      pre {
        font-family: Fira Code, Iosevka SS09 Web, Monoid, Jetbrains Mono,
          DejaVu Sans Code, Cascadia Code, Victor Mono, Lilex, monospace !important;
        padding: 10px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <pre style="color:#eeeeee;background:#222222;position:relative">$ node --test
<span style="color:#00a000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✔</span>   add </span><span style="color:#404040">(0.569917ms)
</span><span style="color:#00a000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✔</span>   stringOrNull </span><span style="color:#404040">(0.063833ms)
</span><span style="position:absolute;line-height:1;margin-top:0.3ex">▶</span>   suite of tests that fail
  <span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   uhoh, this one throws </span><span style="color:#404040">(0.910959ms)
</span>    RangeError [Error]: Invalid time value
        at Date.toISOString (&lt;anonymous&gt;)
        at thrower <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>lib/index.mjs:11:43<span style="color:#404040">)
</span>        at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:26:18<span style="color:#404040">)
</span>    <span style="color:#404040">    at Test.runInAsyncScope (node:async_hooks:206:9)
</span>    <span style="color:#404040">    at Test.run (node:internal/test_runner/test:631:25)
</span>    <span style="color:#404040">    at Test.start (node:internal/test_runner/test:542:17)
</span>    <span style="color:#404040">    at TestContext.test (node:internal/test_runner/test:167:20)
</span>        at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:23:11<span style="color:#404040">)
</span>    <span style="color:#404040">    at Test.runInAsyncScope (node:async_hooks:206:9)
</span>    <span style="color:#404040">    at Test.run (node:internal/test_runner/test:631:25)

</span>  <span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   failer </span><span style="color:#404040">(0.532708ms)
</span>    AssertionError [ERR_ASSERTION]: '11' == '2'
        at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:33:12<span style="color:#404040">)
</span>    <span style="color:#404040">    at Test.runInAsyncScope (node:async_hooks:206:9)
</span>    <span style="color:#404040">    at Test.run (node:internal/test_runner/test:631:25)
</span>    <span style="color:#404040">    at Test.start (node:internal/test_runner/test:542:17)
</span>    <span style="color:#404040">    at TestContext.test (node:internal/test_runner/test:167:20)
</span>        at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:29:11<span style="color:#404040">)
</span>    <span style="color:#404040">    at async Test.run (node:internal/test_runner/test:632:9)
</span>    <span style="color:#404040">    at async Test.processPendingSubtests (node:internal/test_runner/test:374:7)</span> {
      generatedMessage: <span style="color:#e0e000">true</span>,
      code: <span style="color:#00a000">'ERR_ASSERTION'</span>,
      actual: <span style="color:#00a000">'11'</span>,
      expected: <span style="color:#00a000">'2'</span>,
      operator: <span style="color:#00a000">'=='
</span>    }

<span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">▶</span>   </span>suite of tests that fail <span style="color:#404040">(1.684292ms)

</span><span style="color:#00a000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✔</span>   add </span><span style="color:#404040">(1.774ms)
</span><span style="color:#00a000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✔</span>   stringOrNull </span><span style="color:#404040">(1.091ms)
</span><span style="position:absolute;line-height:1;margin-top:0.3ex">▶</span>   suite of tests that fail
  <span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   uhoh, this one throws </span><span style="color:#404040">(10.016ms)
</span>    Error: Invalid time value
    | // This is a function that throws, to show how both
    | // handle errors.
    | export const thrower = (n) =&gt; new Date(n).toISOString()
    | ------------------------------------------^
    | 
    | // one that fails, to show how failures are handled
        at Date.toISOString (&lt;anonymous&gt;)
        at thrower <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>lib/index.mjs:11:43<span style="color:#404040">)
</span>        at Test.&lt;anonymous&gt; <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:27:13<span style="color:#404040">)</span> {
      type: <span style="color:#00a000">'RangeError'</span>,
      tapCaught: <span style="color:#00a000">'testFunctionThrow'
</span>    }

  <span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   failer </span><span style="color:#404040">(3.676ms)
</span>    Error: should be equal
    <span style="color:#ffe5f1;background:#ac3ea3">--- expected                                                               
</span>    <span style="color:#f2ffe5;background:#3a7500">+++ actual                                                                 
</span>    <span style="color:#759eef;background:#222222">@@ -1,1 +1,1 @@                                                            
</span>    <span style="color:#ffe5f1;background:#ac3ea3">-2                                                                         
</span>    <span style="color:#f2ffe5;background:#3a7500">+11                                                                        
</span>    |     t.equal(failer(-1), '0')
    |     // expect to convert string numbers to Number, but doesn't
    |     t.equal(failer('1'), '2')
    | ------^
    |     // expect to convert non-numerics to 0, but it doesn't
    |     t.equal(failer({}), '1')
        at Test.&lt;anonymous&gt; <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:35:7<span style="color:#404040">)
</span>        at Test.&lt;anonymous&gt; <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:31:5<span style="color:#404040">)
</span>        at <span style="color:#404040">/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:23:3 {
      compare: <span style="color:#00a000">'==='
</span>    }

<span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">▶</span>   </span>suite of tests that fail <span style="color:#404040">(17.681ms)

</span><span style="color:#0040e0"><span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   tests 9
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   suites 1
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   pass 4
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   fail 5
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   cancelled 0
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   skipped 0
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   todo 0
<span style="position:absolute;line-height:1;margin-top:0.3ex">ℹ</span>   duration_ms 160.809375

</span><span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   failing tests:

</span>test at file:/Users/isaacs/dev/tapjs/node-test-example/test/node.test.js:23:11
<span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   uhoh, this one throws </span><span style="color:#404040">(0.910959ms)
</span>  RangeError [Error]: Invalid time value
      at Date.toISOString (&lt;anonymous&gt;)
      at thrower <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>lib/index.mjs:11:43<span style="color:#404040">)
</span>      at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:26:18<span style="color:#404040">)
</span>  <span style="color:#404040">    at Test.runInAsyncScope (node:async_hooks:206:9)
</span>  <span style="color:#404040">    at Test.run (node:internal/test_runner/test:631:25)
</span>  <span style="color:#404040">    at Test.start (node:internal/test_runner/test:542:17)
</span>  <span style="color:#404040">    at TestContext.test (node:internal/test_runner/test:167:20)
</span>      at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:23:11<span style="color:#404040">)
</span>  <span style="color:#404040">    at Test.runInAsyncScope (node:async_hooks:206:9)
</span>  <span style="color:#404040">    at Test.run (node:internal/test_runner/test:631:25)

</span>test at file:/Users/isaacs/dev/tapjs/node-test-example/test/node.test.js:29:11
<span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   failer </span><span style="color:#404040">(0.532708ms)
</span>  AssertionError [ERR_ASSERTION]: '11' == '2'
      at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:33:12<span style="color:#404040">)
</span>  <span style="color:#404040">    at Test.runInAsyncScope (node:async_hooks:206:9)
</span>  <span style="color:#404040">    at Test.run (node:internal/test_runner/test:631:25)
</span>  <span style="color:#404040">    at Test.start (node:internal/test_runner/test:542:17)
</span>  <span style="color:#404040">    at TestContext.test (node:internal/test_runner/test:167:20)
</span>      at TestContext.&lt;anonymous&gt; <span style="color:#404040">(file:///Users/isaacs/dev/tapjs/node-test-example/</span>test/node.test.js:29:11<span style="color:#404040">)
</span>  <span style="color:#404040">    at async Test.run (node:internal/test_runner/test:632:9)
</span>  <span style="color:#404040">    at async Test.processPendingSubtests (node:internal/test_runner/test:374:7)</span> {
    generatedMessage: <span style="color:#e0e000">true</span>,
    code: <span style="color:#00a000">'ERR_ASSERTION'</span>,
    actual: <span style="color:#00a000">'11'</span>,
    expected: <span style="color:#00a000">'2'</span>,
    operator: <span style="color:#00a000">'=='
</span>  }

test at test/tap.test.js:24:5
<span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   uhoh, this one throws </span><span style="color:#404040">(10.016ms)
</span>  Error: Invalid time value
  | // This is a function that throws, to show how both
  | // handle errors.
  | export const thrower = (n) =&gt; new Date(n).toISOString()
  | ------------------------------------------^
  | 
  | // one that fails, to show how failures are handled
      at Date.toISOString (&lt;anonymous&gt;)
      at thrower <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>lib/index.mjs:11:43<span style="color:#404040">)
</span>      at Test.&lt;anonymous&gt; <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:27:13<span style="color:#404040">)</span> {
    type: <span style="color:#00a000">'RangeError'</span>,
    tapCaught: <span style="color:#00a000">'testFunctionThrow'
</span>  }

test at test/tap.test.js:31:5
<span style="color:#ff0000"><span style="position:absolute;line-height:1;margin-top:0.3ex">✖</span>   failer </span><span style="color:#404040">(3.676ms)
</span>  Error: should be equal
  <span style="color:#ffe5f1;background:#ac3ea3">--- expected                                                               
</span>  <span style="color:#f2ffe5;background:#3a7500">+++ actual                                                                 
</span>  <span style="color:#759eef;background:#222222">@@ -1,1 +1,1 @@                                                            
</span>  <span style="color:#ffe5f1;background:#ac3ea3">-2                                                                         
</span>  <span style="color:#f2ffe5;background:#3a7500">+11                                                                        
</span>  |     t.equal(failer(-1), '0')
  |     // expect to convert string numbers to Number, but doesn't
  |     t.equal(failer('1'), '2')
  | ------^
  |     // expect to convert non-numerics to 0, but it doesn't
  |     t.equal(failer({}), '1')
      at Test.&lt;anonymous&gt; <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:35:7<span style="color:#404040">)
</span>      at Test.&lt;anonymous&gt; <span style="color:#404040">(/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:31:5<span style="color:#404040">)
</span>      at <span style="color:#404040">/Users/isaacs/dev/tapjs/node-test-example/</span>test/tap.test.js:23:3 {
    compare: <span style="color:#00a000">'==='
</span>  }</pre>
  </body>
</html>
